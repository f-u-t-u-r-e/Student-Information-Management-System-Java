# 学生信息管理系统 v2.0 更新说明

## 新增功能

### 1. 灵活的成绩管理系统

**核心特性:**
- 每个学生可以有不同数量的课程
- 每门课程包含:课程名、学分、成绩
- 自动计算加权平均分(GPA)

**技术实现:**
- 新增`Course`类,封装课程信息
- `Student`类使用`List<Course>`存储课程列表
- GPA计算公式: `Σ(课程成绩×学分) / Σ学分`

**数据结构:**
```java
public class Course {
    private String courseName;  // 课程名称
    private double credit;      // 学分
    private double score;       // 成绩
}

public class Student {
    private List<Course> courses;  // 课程列表
    private double totalCredits;   // 总学分
    private double gpa;            // 加权平均分
}
```

### 2. 成绩导入功能

**功能说明:**
- 支持从CSV文件批量导入成绩
- 文件格式: 学号,课程名,学分,成绩
- 自动匹配学生并添加课程
- 实时显示导入进度和结果

**使用方法:**
1. 点击"导入成绩"按钮
2. 选择成绩CSV文件
3. 系统自动导入并计算GPA

**示例文件:**
```
2021001,高等数学,4.0,85.5
2021001,大学英语,3.0,90.0
2021002,高等数学,4.0,91.0
```

### 3. 专业排名功能

**功能说明:**
- 按专业查看学生成绩排名
- 根据GPA降序排列
- 显示排名、学号、姓名、总学分、GPA等信息
- 支持排名数据导出

**统计信息:**
- 专业总人数
- 已录入成绩人数
- 专业平均GPA

**排名规则:**
- 按GPA从高到低排序
- 相同GPA并列排名

### 4. 按GPA排序

**功能说明:**
- 在主界面可以按GPA对所有学生排序
- 菜单: 排序 -> 按GPA排序
- 降序排列,GPA高的在前

## 数据格式变化

### 旧格式(v1.0):
```
学号,姓名,性别,年龄,专业,班级,联系电话
```

### 新格式(v2.0):
```
学号,姓名,性别,年龄,专业,班级,联系电话,[课程:学分:成绩|课程:学分:成绩|...]
```

**兼容性:**
- 系统向下兼容,可以读取v1.0格式的数据
- 没有成绩的学生,课程列表为空,GPA为0

## 界面变化

### 主窗口新增按钮:
- **导入成绩**: 打开成绩导入对话框
- **专业排名**: 打开专业排名窗口

### 新增菜单:
- **成绩菜单**:
  - 导入成绩
  - 专业排名

- **排序菜单新增**:
  - 按GPA排序

## 新增文件

### Java源文件:
- `src/model/Course.java` - 课程实体类
- `src/gui/ScoreImportDialog.java` - 成绩导入对话框
- `src/gui/MajorRankingFrame.java` - 专业排名窗口

### 数据文件:
- `data/scores_import_example.csv` - 成绩导入示例文件

## 技术亮点

1. **面向对象设计**
   - Course类独立封装课程信息
   - Student类组合Course对象
   - 符合单一职责原则

2. **集合框架应用**
   - ArrayList存储课程列表
   - Stream API进行数据过滤和排序
   - Lambda表达式简化代码

3. **文件I/O处理**
   - 支持复杂的CSV格式解析
   - 课程信息使用特殊分隔符(|和:)
   - 向下兼容旧数据格式

4. **异常处理**
   - 成绩导入错误处理
   - 数据解析异常处理
   - 用户友好的错误提示

5. **用户体验优化**
   - SwingWorker实现后台导入
   - 实时显示导入进度
   - 表格自动刷新

## 使用场景

### 场景1: 期末成绩录入
1. 准备CSV格式的成绩文件
2. 使用"导入成绩"功能批量导入
3. 系统自动计算每个学生的GPA

### 场景2: 查看专业排名
1. 点击"专业排名"按钮
2. 选择要查看的专业
3. 查看排名结果
4. 可导出排名数据用于公示

### 场景3: 学生成绩查询
1. 在主界面搜索学生
2. 查看学生的总学分和GPA
3. 系统自动显示加权平均分

## 数据示例

### 完整的学生记录:
```
2021001,张三,男,20,计算机科学与技术,计算机2101,13800138001,[高等数学:4.0:85.5|大学英语:3.0:90.0|程序设计基础:4.0:92.0|数据结构:4.0:88.0]
```

**解析后:**
- 学号: 2021001
- 姓名: 张三
- 课程列表:
  - 高等数学: 学分4.0, 成绩85.5
  - 大学英语: 学分3.0, 成绩90.0
  - 程序设计基础: 学分4.0, 成绩92.0
  - 数据结构: 学分4.0, 成绩88.0
- 总学分: 15.0
- GPA: (85.5×4 + 90×3 + 92×4 + 88×4) / 15 = 88.7

## 升级指南

### 从v1.0升级到v2.0:
1. 备份原有的students.txt文件
2. 替换所有Java源文件
3. 重新编译运行
4. 系统会自动兼容旧数据
5. 使用成绩导入功能添加成绩数据

### 注意事项:
- v2.0数据文件可能无法在v1.0中正常读取
- 建议保留v1.0的备份
- 成绩导入前确保学生信息已存在

## 未来计划

- [ ] 支持Excel格式导入导出
- [ ] 成绩可视化图表
- [ ] 学生成绩单打印
- [ ] 课程管理功能
- [ ] 成绩分析报告
- [ ] 数据库支持

## 版本信息

- **版本**: v2.0
- **发布日期**: 2024年
- **主要贡献**: 成绩管理系统、专业排名功能
- **兼容性**: 向下兼容v1.0数据格式
