
# 学生信息管理系统 (Java)

![Java](https://img.shields.io/badge/Java-8%2B-blue)
![GUI](https://img.shields.io/badge/Swing-UI-yellow)
![Version](https://img.shields.io/badge/Version-2.3-brightgreen)
![Status](https://img.shields.io/badge/Build-Manual-lightgrey)
![License](https://img.shields.io/badge/License-MIT-orange)

## 项目简介

本系统是一个基于 Java Swing 的学生信息与课程成绩管理平台，支持学生信息增删改查、灵活的课程成绩管理、加权 GPA 计算、专业排名、统计分析、成绩导入、数据备份等功能。适合课程设计、教学演示与基础实践使用。

## 主要功能

- 学生信息管理（添加 / 编辑 / 删除 / 查看）
- 多条件搜索（学号 / 姓名 / 专业 / 班级 / 综合关键字）
- 成绩导入（CSV批量解析，兼容全角逗号）
- Excel 排名导出（专业排名与全部学生排名生成 `.xlsx` 文件）
- 课程管理（单学生课程增删改查、实时GPA更新）
- 专业排名（按专业筛选 + GPA排序）
- GPA加权计算（基于课程学分与成绩）
- 数据统计（性别分布、平均年龄、专业分布）
- 数据持久化（文本文件存储 + 自动保存）
- 备份功能（生成 `.backup` 文件）
- 自定义排序（学号 / 姓名 / 年龄 / GPA）

## 新增亮点（v2.4）

- 账号与权限系统：支持管理员/教师/学生三种角色
- 登录与用户管理界面：登录、管理员注册用户、管理员重置密码、用户自助修改密码
- 权限控制：
	- 管理员：可注册教师/学生账号、重置任意用户密码
	- 教师：可修改学生数据（增删改、导入成绩、课程管理）
	- 学生：仅查询与查看统计/排名/导出，不可修改数据

## 技术栈

- 编程语言：Java 8+
- 图形界面：Swing (JFrame / JTable / JDialog / JFileChooser / JMenu)
- 数据存储：UTF-8 文本（自定义 CSV 格式）
- 集合与Stream：ArrayList / HashMap / Comparator / Stream API
- 异常处理：try-with-resources + 输入验证
- 架构分层：model / service / gui / data

## 运行环境

- 操作系统：Windows / Linux / macOS（示例脚本以 Windows 为主）
- JDK：8 及以上版本
- 编码：UTF-8
- 字体建议：Windows 环境默认包含中文字体（微软雅黑/宋体）。Swing 文本区域已按中文友好字体优先级设置，减少中文显示乱码。

## 项目结构

```
Student-Information-Management-System-Java/
├── run.bat                       # 运行脚本（保持根目录）
├── compile.bat                   # 编译脚本（Windows）
├── run.sh / compile.sh           # 类Unix脚本(可选)
├── README.md                     # 项目说明
├── data/
│   ├── students.txt              # 学生与课程数据文件
│   ├── students.txt.backup       # 备份（运行后生成）
│   └── scores_import_example.csv # 成绩导入示例
├── src/
│   ├── Main.java                 # 程序入口
│   ├── model/
│   │   ├── Student.java              # 学生实体（含课程列表与GPA计算）
│   │   ├── Course.java               # 课程实体（学分+成绩）
│   │   └── User.java                 # 用户实体（ADMIN/TEACHER/STUDENT）
│   ├── service/
│   │   ├── FileManager.java          # 文件读写与备份
│   │   ├── StudentManager.java       # 学生/成绩业务逻辑
│   │   └── UserManager.java          # 用户认证/注册/修改/重置密码 + 持久化
│   └── gui/
│       ├── MainFrame.java                # 主窗口（权限控制）
│       ├── LoginDialog.java              # 登录对话框
│       ├── RegisterUserDialog.java       # 管理员注册用户对话框
│       ├── ChangePasswordDialog.java     # 用户自助修改密码对话框
│       ├── AdminResetPasswordDialog.java # 管理员重置用户密码对话框
│       ├── StudentDialog.java            # 学生信息编辑对话框
│       ├── ScoreImportDialog.java        # 成绩导入对话框
│       ├── MajorRankingFrame.java        # 专业排名窗口
│       └── CourseManagementDialog.java   # 单学生课程管理（v2.1）
└── 其它文档
```

## 数据文件说明
`users.txt` 用户与角色：
```
# username,password,role
admin,admin123,ADMIN
teacher1,pass123,TEACHER
student1,pass123,STUDENT
```
角色含义：
- ADMIN：管理员（可注册用户、重置密码）
- TEACHER：教师（可修改学生数据）
- STUDENT：学生（只能查询）


`students.txt` 每行一个学生（含课程列表）：
```
学号,姓名,性别,年龄,专业,班级,联系电话,[课程1:学分:成绩|课程2:学分:成绩|...]
2021001,张三,男,20,计算机科学与技术,计科2101,13800138001,[高等数学:4.0:85.5|大学英语:3.0:90.0|程序设计基础:4.0:92.0]
```

成绩导入文件（可批量追加课程）：
```
学号,课程名,学分,成绩
2021001,高等数学,4.0,85.5
2021001,大学英语,3.0,90.0
2021002,数据结构,4.0,88.0
```
支持：
```
2021001，高等数学，4.0，100   # 全角逗号也可识别
```

## 安装与编译

方式一：脚本（推荐）
```bash
# Windows
./compile.bat
./run.bat
```

方式二：手动
```bash
cd Student-Information-Management-System-Java
javac -encoding UTF-8 -d bin -sourcepath src src/Main.java src/model/*.java src/service/*.java src/gui/*.java
java -cp bin Main
```

方式三：IDE
1. 使用 IntelliJ IDEA / Eclipse 导入
2. 设置 Project SDK = JDK 8+
3. 运行 `Main.java`

## 使用说明

1. 启动程序：执行 `run.bat`（首次可用管理员 `admin/admin123` 登录）
2. 添加学生：点击“添加学生”填写信息
3. 编辑学生：选中行 → “编辑学生”或双击
4. 删除学生：选中行 → “删除学生”
5. 搜索：选择类型 + 输入关键字 → “搜索”
6. 排序：使用菜单“排序”
7. 查看统计：点击“统计信息”
8. 数据备份：点击“备份数据”生成 `.backup`
9. 导入成绩：点击“导入成绩”→ 选择 CSV → 自动追加课程
10. 专业排名：点击“专业排名”查看排序与统计；可导出当前专业排名为 Excel
11. 导出全部排名：工具栏“导出全部排名”生成所有学生排名 Excel
12. 管理单学生课程：选中学生 → “课程管理”→ 增删改课程
13. 用户登录与权限：
	- 登录：启动后弹出登录窗口，输入用户名/密码
	- 修改密码（所有用户）：菜单“用户 → 修改密码”
	- 注册用户（仅管理员）：菜单“管理员 → 注册用户”（可创建教师/学生）
	- 重置密码（仅管理员）：菜单“管理员 → 重置用户密码”
	- 权限说明：学生仅查询，教师可修改，管理员具备用户管理

## 课程管理（v2.1）

- 进入方式：选中学生 → “课程管理”
- 支持操作：添加 / 编辑 / 删除 / 清空
- GPA 与总学分实时刷新
- 关闭窗口后主表自动刷新

## 成绩导入

- 自动解析学号匹配已存在学生
- 未匹配学号会提示“学号不存在”
- 支持全角/中文逗号自动标准化
- 导入成功后自动保存并可在课程管理中查看

## 专业排名与导出

专业排名窗口提供：
- 按所选专业筛选学生并按 GPA 降序排列（并列成绩保留同名次）
- 显示总人数、已录入成绩人数、平均 GPA
- 预览排名数据（文本模式）
- 导出当前专业排名为原生 Excel (`.xlsx`) 文件

Excel 导出特性：
- 无需额外第三方库（内置轻量级 XLSX 生成）
- 自动生成表头：排名/学号/姓名/班级/总学分/GPA/课程数 + 所有出现过的课程列
- 课程列按出现顺序统一（不存在课程的单元格留空）
- 数值单元格使用数值类型，便于后续排序与统计
- 支持全体学生排名导出（工具栏“导出全部排名”）

## 统计分析

提供：
- 总人数
- 男/女生人数
- 平均年龄
- 专业分布（分组计数）

## GPA 计算公式

```
GPA = Σ(课程成绩 × 课程学分) / Σ(全部课程学分)
```
若无课程：GPA = 0

## 数据备份与安全

- 备份文件：`students.txt.backup`
- 触发方式：手动“备份数据”
- 建议：重大操作前先备份
- 文件编码：UTF-8

## 输入验证

- 学号：唯一且不可编辑（避免冲突）
- 姓名 / 专业 / 班级：必填
- 年龄：15–100
- 联系电话：11位数字
- 课程学分与成绩：数值型（异常格式会提示）

## 常见问题 FAQ

| 问题 | 可能原因 | 解决方法 |
|------|----------|----------|
| 导入显示“跳过无效行” | 字段数量不等于4 | 确认格式“学号,课程名,学分,成绩” |
| 全角逗号导致失败 | 旧版本不兼容 | 使用 v2.1 或以上版本 |
| GPA 未更新 | 未使用课程管理对话框 | 通过“课程管理”修改课程 |
| 备份无变化 | 未实际变更数据 | 修改学生后再备份 |
| 数据为空 | `students.txt` 无记录 | 添加学生或填充示例数据 |

## 更新日志
### v2.4 (2025-12)
- 新增登录与权限系统（管理员/教师/学生）
- 管理员可注册用户与重置密码；用户可自助修改密码
- 主界面基于角色禁用相关修改操作（学生不可改）


### v2.3 (2025-12)
- 新增统计图表：性别饼图与专业分布柱状图（Swing 绘制）
- 修复中文显示问题：日志区域采用中文友好字体，减少中文字符显示为方块或乱码的情况
- 环境说明更新

### v2.2 (2025-11)
- 新增原生 Excel (`.xlsx`) 排名导出（专业/全部学生）
- 删除旧 CSV 排名导出实现（简化代码）
 - UI 字体兼容性说明补充，避免中文乱码

### v2.1 (2025-11)
- 新增 `CourseManagementDialog` 单学生课程管理
- 成绩导入兼容全角/中文逗号与 BOM
- 运行脚本改进，避免路径偏移
- README 与数据格式说明更新

### v2.0
- 增加成绩导入与专业排名功能
- 学生 CSV 支持课程集合格式

### v1.0
- 基础学生信息管理 + 文件存储

## 未来规划

- 图表可视化（成绩分布）
- 照片/头像支持
- 多文件自动备份策略

## 贡献

欢迎：
- 提交 Issue / Bug 报告
- 提交新功能 Pull Request
- 优化 UI / 数据结构
- 增加自动化测试

## 免责声明 / 许可
本项目遵循 MIT 许可证。详见仓库根目录中的 `LICENSE` 文件。

数据文件由使用者自行维护；本系统不保证用于真实生产场景的稳定性。

联系方式

- Issues: 反馈问题与建议
- Discussions: 功能讨论与扩展

---

如果需要英文版或进一步的功能文档，请提出需求。
- **开发时间**: 2025.12

## 许可

本项目采用 MIT 许可证，允许用于商业与非商业用途，需保留版权与许可声明。
